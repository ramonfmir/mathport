{"integral_eq_of_has_deriv_within_at_off_countable_of_le":
 "/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr ≃L[ ] » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝ¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr →L[ ] » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr →L[ ] » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr • » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/-- **Fundamental theorem of calculus, part 2**. This version assumes that `f` is continuous on the\ninterval and is differentiable off a countable set `s`.\n\nSee also\n\n* `interval_integral.integral_eq_sub_of_has_deriv_right_of_le` for a version that only assumes right\ndifferentiability of `f`;\n\n* `measure_theory.integral_eq_of_has_deriv_within_at_off_countable` for a version that works both\n  for `a ≤ b` and `b ≤ a` at the expense of using unordered intervals instead of `set.Icc`. -/\ntheorem integral_eq_of_has_deriv_within_at_off_countable_of_le (f f' : exprℝ → E) {a b : exprℝ} (hle : a ≤ b)\n    {s : set (exprℝ)} (hs : s.countable) (Hc : continuous_on f (Icc a b))\n    (Hd : ∀ x ∈ Ioo a b \\ s, has_deriv_at f (f' x) x) (Hi : interval_integrable f' volume a b) :\n    «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\" a b\n        (f' x) =\n      f b - f a :=\n  by\n  set e : «expr ≃L[ ] » (exprℝ) (exprℝ) («exprℝ¹») := (continuous_linear_equiv.fun_unique (fin 1) (exprℝ) (exprℝ)).symm\n  have e_symm : ∀ x, e.symm x = x 0 := fun x => rfl\n  set F' : exprℝ → «expr →L[ ] » (exprℝ) (exprℝ) E := fun x =>\n    smul_right (1 : «expr →L[ ] » (exprℝ) (exprℝ) (exprℝ)) (f' x)\n  have hF' : ∀ x y, F' x y = «expr • » y (f' x) := fun x y => rfl\n  calc\n    «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\" a b\n          (f' x) =\n        «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\" (Icc a b)\n          (f' x) :=\n      by simp only [interval_integral.integral_of_le hle, set_integral_congr_set_ae Ioc_ae_eq_Icc]\n    _ =\n        finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n          («expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n              (Icc (e a ∘ i.succ_above) (e b ∘ i.succ_above)) (f (e.symm <| i.insert_nth (e b i) x)) -\n            «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n              (Icc (e a ∘ i.succ_above) (e b ∘ i.succ_above)) (f (e.symm <| i.insert_nth (e a i) x))) :=\n      by\n      simp only [← interior_Icc] at Hd\n      refine'\n        integral_divergence_of_has_fderiv_within_at_off_countable_of_equiv e _ _ (fun _ => f) (fun _ => F') s hs a b hle\n          (fun i => Hc) (fun x hx i => Hd x hx) _ _ _\n      · exact fun x y => (OrderIso.funUnique (fin 1) (exprℝ)).symm.le_iff_le\n      · exact (volume_preserving_fun_unique (fin 1) (exprℝ)).symm _\n      · intro x\n        rw [fin.sum_univ_one, hF', e_symm, Pi.single_eq_same, one_smul]\n      · rw [interval_integrable_iff_integrable_Ioc_of_le hle] at Hi\n        exact Hi.congr_set_ae Ioc_ae_eq_Icc.symm\n    _ = f b - f a := by\n      simp only [fin.sum_univ_one, e_symm]\n      have : ∀ c : exprℝ, const (fin 0) c = is_empty_elim := fun c => subsingleton.elim _ _\n      simp [this, volume_pi, measure.pi_of_empty fun _ : fin 0 => volume]\n    \n#align integral_eq_of_has_deriv_within_at_off_countable_of_le integral_eq_of_has_deriv_within_at_off_countable_of_le\n\n",
 "integral_eq_of_has_deriv_within_at_off_countable":
 "/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `set.uIcc -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/-- **Fundamental theorem of calculus, part 2**. This version assumes that `f` is continuous on the\ninterval and is differentiable off a countable set `s`.\n\nSee also `measure_theory.interval_integral.integral_eq_sub_of_has_deriv_right` for a version that\nonly assumes right differentiability of `f`.\n-/\ntheorem integral_eq_of_has_deriv_within_at_off_countable (f f' : exprℝ → E) {a b : exprℝ} {s : set (exprℝ)}\n    (hs : s.countable) (Hc : continuous_on f (set.uIcc a b))\n    (Hd : ∀ x ∈ Ioo (min a b) (max a b) \\ s, has_deriv_at f (f' x) x) (Hi : interval_integrable f' volume a b) :\n    «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\" a b\n        (f' x) =\n      f b - f a :=\n  by\n  cases' le_total a b with hab hab\n  · simp only [uIcc_of_le hab, min_eq_left hab, max_eq_right hab] at *\n    exact integral_eq_of_has_deriv_within_at_off_countable_of_le f f' hab hs Hc Hd Hi\n  · simp only [uIcc_of_ge hab, min_eq_right hab, max_eq_left hab] at *\n    rw [interval_integral.integral_symm, neg_eq_iff_neg_eq, neg_sub, eq_comm]\n    exact integral_eq_of_has_deriv_within_at_off_countable_of_le f f' hab hs Hc Hd Hi.symm\n#align integral_eq_of_has_deriv_within_at_off_countable integral_eq_of_has_deriv_within_at_off_countable\n\n",
 "integral_divergence_prod_Icc_of_has_fderiv_within_at_off_countable_of_le":
 "/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr![ ,]» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr![ ,]» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr![ ,]» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr![ ,]» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr![ ,]» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr![ ,]» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr![ ,]» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr![ ,]» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝ¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝ¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr ≃L[ ] » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝ²» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr →L[ ] » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:177:8: unsupported: ambiguous notation -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `lower_set.prod -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:177:8: unsupported: ambiguous notation -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `lower_set.prod -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/-- **Divergence theorem** for functions on the plane along rectangles. It is formulated in terms of\ntwo functions `f g : ℝ × ℝ → E` and an integral over `Icc a b = [a.1, b.1] × [a.2, b.2]`, where\n`a b : ℝ × ℝ`, `a ≤ b`. When thinking of `f` and `g` as the two coordinates of a single function\n`F : ℝ × ℝ → E × E` and when `E = ℝ`, this is the usual statement that the integral of the\ndivergence of `F` inside the rectangle equals the integral of the normal derivative of `F` along the\nboundary.\n\nSee also `measure_theory.integral2_divergence_prod_of_has_fderiv_within_at_off_countable` for a\nversion that does not assume `a ≤ b` and uses iterated interval integral instead of the integral\nover `Icc a b`. -/\ntheorem integral_divergence_prod_Icc_of_has_fderiv_within_at_off_countable_of_le (f g : exprℝ × exprℝ → E)\n    (f' g' : exprℝ × exprℝ → «expr →L[ ] » (exprℝ × exprℝ) (exprℝ) E) (a b : exprℝ × exprℝ) (hle : a ≤ b)\n    (s : set (exprℝ × exprℝ)) (hs : s.countable) (Hcf : continuous_on f (Icc a b)) (Hcg : continuous_on g (Icc a b))\n    (Hdf : ∀ x ∈ lower_set.prod (Ioo a.1 b.1) (Ioo a.2 b.2) \\ s, has_fderiv_at f (f' x) x)\n    (Hdg : ∀ x ∈ lower_set.prod (Ioo a.1 b.1) (Ioo a.2 b.2) \\ s, has_fderiv_at g (g' x) x)\n    (Hi : integrable_on (fun x => f' x (1, 0) + g' x (0, 1)) (Icc a b)) :\n    «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\" (Icc a b)\n        (f' x (1, 0) + g' x (0, 1)) =\n      «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\" a.1\n              b.1 (g (x, b.2)) -\n            «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\"\n              a.1 b.1 (g (x, a.2)) +\n          «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\"\n            a.2 b.2 (f (b.1, y)) -\n        «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\" a.2\n          b.2 (f (a.1, y)) :=\n  let e : «expr ≃L[ ] » (exprℝ × exprℝ) (exprℝ) («exprℝ²») :=\n    (continuous_linear_equiv.fin_two_arrow (exprℝ) (exprℝ)).symm\n  calc\n    «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\" (Icc a b)\n          (f' x (1, 0) + g' x (0, 1)) =\n        finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n          («expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n              (Icc (e a ∘ i.succ_above) (e b ∘ i.succ_above))\n              ((«expr![ ,]» \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr![ ,]»\") i\n                (e.symm <| i.insert_nth (e b i) x)) -\n            «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n              (Icc (e a ∘ i.succ_above) (e b ∘ i.succ_above))\n              ((«expr![ ,]» \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr![ ,]»\") i\n                (e.symm <| i.insert_nth (e a i) x))) :=\n      by\n      refine'\n        integral_divergence_of_has_fderiv_within_at_off_countable_of_equiv e _ _\n          («expr![ ,]» \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr![ ,]»\")\n          («expr![ ,]» \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr![ ,]»\") s hs a b\n          hle _ (fun x hx => _) _ _ Hi\n      · exact fun x y => (order_iso.fin_two_arrow_iso (exprℝ)).symm.le_iff_le\n      · exact (volume_preserving_fin_two_arrow (exprℝ)).symm _\n      · exact Fin.forall_fin_two.2 ⟨Hcf, Hcg⟩\n      · rw [Icc_prod_eq, interior_prod_eq, interior_Icc, interior_Icc] at hx\n        exact Fin.forall_fin_two.2 ⟨Hdf x hx, Hdg x hx⟩\n      · intro x\n        rw [fin.sum_univ_two]\n        simp\n    _ =\n        «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n              (Icc a.2 b.2) (f (b.1, y)) -\n            «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n              (Icc a.2 b.2) (f (a.1, y)) +\n          («expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n              (Icc a.1 b.1) (g (x, b.2)) -\n            «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n              (Icc a.1 b.1) (g (x, a.2))) :=\n      by\n      have :\n        ∀ (a b : «exprℝ¹») (f : «exprℝ¹» → E),\n          «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n              (Icc a b) (f x) =\n            «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n              (Icc (a 0) (b 0)) (f fun _ => x) :=\n        by\n        intro a b f\n        convert\n          (((volume_preserving_fun_unique (fin 1) (exprℝ)).symm _).set_integral_preimage_emb\n              (measurable_equiv.measurable_embedding _) _ _).symm\n        exact ((OrderIso.funUnique (fin 1) (exprℝ)).symm.preimage_Icc a b).symm\n      simp only [fin.sum_univ_two, this]\n      rfl\n    _ =\n        «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\" a.1\n                b.1 (g (x, b.2)) -\n              «expr∫ in .. , »\n                \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\" a.1 b.1\n                (g (x, a.2)) +\n            «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\"\n              a.2 b.2 (f (b.1, y)) -\n          «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\"\n            a.2 b.2 (f (a.1, y)) :=\n      by\n      simp only [interval_integral.integral_of_le hle.1, interval_integral.integral_of_le hle.2,\n        set_integral_congr_set_ae Ioc_ae_eq_Icc]\n      abel\n    \n#align\n  integral_divergence_prod_Icc_of_has_fderiv_within_at_off_countable_of_le integral_divergence_prod_Icc_of_has_fderiv_within_at_off_countable_of_le\n\n",
 "integral_divergence_of_has_fderiv_within_at_off_countable_of_equiv":
 "/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr ⁻¹' » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr ⁻¹' » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expre » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expre » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr ∘L » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr →L[ ] » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr ⁻¹' » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr ≃L[ ] » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr →L[ ] » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expre » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/-- An auxiliary lemma that is used to specialize the general divergence theorem to spaces that do\nnot have the form `fin n → ℝ`. -/\ntheorem integral_divergence_of_has_fderiv_within_at_off_countable_of_equiv {F : Type _} [normed_add_comm_group F]\n    [normed_space (exprℝ) F] [partial_order F] [measure_space F] [borel_space F]\n    (eL : «expr ≃L[ ] » F (exprℝ) («exprℝⁿ⁺¹»)) (he_ord : ∀ x y, eL x ≤ eL y ↔ x ≤ y)\n    (he_vol : measure_preserving eL volume volume) (f : fin (n + 1) → F → E)\n    (f' : fin (n + 1) → F → «expr →L[ ] » F (exprℝ) E) (s : set F) (hs : s.countable) (a b : F) (hle : a ≤ b)\n    (Hc : ∀ i, continuous_on (f i) (Icc a b)) (Hd : ∀ x ∈ interior (Icc a b) \\ s, ∀ (i), has_fderiv_at (f i) (f' i x) x)\n    (DF : F → E)\n    (hDF :\n      ∀ x,\n        DF x =\n          finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n            (f' i x (eL.symm <| «expre » i)))\n    (Hi : integrable_on DF (Icc a b)) :\n    «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\" (Icc a b)\n        (DF x) =\n      finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n        («expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n            (Icc (eL a ∘ i.succ_above) (eL b ∘ i.succ_above)) (f i (eL.symm <| i.insert_nth (eL b i) x)) -\n          «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n            (Icc (eL a ∘ i.succ_above) (eL b ∘ i.succ_above)) (f i (eL.symm <| i.insert_nth (eL a i) x))) :=\n  have he_emb : measurable_embedding eL := eL.to_homeomorph.to_measurable_equiv.measurable_embedding\n  have hIcc : «expr ⁻¹' » eL (Icc (eL a) (eL b)) = Icc a b :=\n    by\n    ext1 x\n    simp only [Set.mem_preimage, Set.mem_Icc, he_ord]\n  have hIcc' : Icc (eL a) (eL b) = «expr ⁻¹' » eL.symm (Icc a b) := by rw [← hIcc, eL.symm_preimage_preimage]\n  calc\n    «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\" (Icc a b)\n          (DF x) =\n        «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\" (Icc a b)\n          (finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n            (f' i x (eL.symm <| «expre » i))) :=\n      by simp only [hDF]\n    _ =\n        «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n          (Icc (eL a) (eL b))\n          (finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n            (f' i (eL.symm x) (eL.symm <| «expre » i))) :=\n      by\n      rw [← he_vol.set_integral_preimage_emb he_emb]\n      simp only [hIcc, eL.symm_apply_apply]\n    _ =\n        finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n          («expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n              (Icc (eL a ∘ i.succ_above) (eL b ∘ i.succ_above)) (f i (eL.symm <| i.insert_nth (eL b i) x)) -\n            «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n              (Icc (eL a ∘ i.succ_above) (eL b ∘ i.succ_above)) (f i (eL.symm <| i.insert_nth (eL a i) x))) :=\n      by\n      convert\n        integral_divergence_of_has_fderiv_within_at_off_countable' (eL a) (eL b) ((he_ord _ _).2 hle)\n          (fun i x => f i (eL.symm x))\n          (fun i x => «expr ∘L » (f' i (eL.symm x)) (eL.symm : «expr →L[ ] » («exprℝⁿ⁺¹») (exprℝ) F))\n          («expr ⁻¹' » eL.symm s) (hs.preimage eL.symm.injective) _ _ _\n      · exact fun i => (Hc i).comp eL.symm.continuous_on hIcc'.subset\n      · refine' fun x hx i => (Hd (eL.symm x) ⟨_, hx.2⟩ i).comp x eL.symm.has_fderiv_at\n        rw [← hIcc]\n        refine' preimage_interior_subset_interior_preimage eL.continuous _\n        simpa only [Set.mem_preimage, eL.apply_symm_apply, ← pi_univ_Icc, interior_pi_set finite_univ,\n          interior_Icc] using hx.1\n      · rw [← he_vol.integrable_on_comp_preimage he_emb, hIcc]\n        simp [← hDF, (· ∘ ·), Hi]\n    \n#align\n  integral_divergence_of_has_fderiv_within_at_off_countable_of_equiv integral_divergence_of_has_fderiv_within_at_off_countable_of_equiv\n\n",
 "integral_divergence_of_has_fderiv_within_at_off_countable_aux₂":
 "/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expre » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expre » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `nhds -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expre » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `nhds -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `nhds -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `nhds -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr⋃ , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr⋃ , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.prod_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.prod_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.prod_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.prod_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr‖ ‖» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.prod_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.prod_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.prod_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.prod_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprEⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr →L[ ] » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprEⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expre » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expre » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/-- An auxiliary lemma for\n`measure_theory.integral_divergence_of_has_fderiv_within_at_off_countable`. Compared to the previous\nlemma, here we drop the assumption of differentiability on the boundary of the box. -/\ntheorem integral_divergence_of_has_fderiv_within_at_off_countable_aux₂ (I : box (fin (n + 1)))\n    (f : «exprℝⁿ⁺¹» → «exprEⁿ⁺¹») (f' : «exprℝⁿ⁺¹» → «expr →L[ ] » («exprℝⁿ⁺¹») (exprℝ) («exprEⁿ⁺¹»))\n    (s : set («exprℝⁿ⁺¹»)) (hs : s.countable) (Hc : continuous_on f I.Icc)\n    (Hd : ∀ x ∈ I.Ioo \\ s, has_fderiv_at f (f' x) x)\n    (Hi :\n      integrable_on\n        (fun x =>\n          finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n            (f' x («expre » i) i))\n        I.Icc) :\n    «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\" I.Icc\n        (finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n          (f' x («expre » i) i)) =\n      finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n        («expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n            (I.face i).Icc (f (i.insert_nth (I.upper i) x) i) -\n          «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n            (I.face i).Icc (f (i.insert_nth (I.lower i) x) i)) :=\n  by\n  /- Choose a monotone sequence `J k` of subboxes that cover the interior of `I` and prove that\n    these boxes satisfy the assumptions of the previous lemma. -/\n  rcases I.exists_seq_mono_tendsto with ⟨J, hJ_sub, hJl, hJu⟩\n  have hJ_sub' : ∀ k, (J k).Icc ⊆ I.Icc := fun k => (hJ_sub k).trans I.Ioo_subset_Icc\n  have hJ_le : ∀ k, J k ≤ I := fun k => box.le_iff_Icc.2 (hJ_sub' k)\n  have HcJ : ∀ k, continuous_on f (J k).Icc := fun k => Hc.mono (hJ_sub' k)\n  have HdJ : ∀ (k), ∀ x ∈ (J k).Icc \\ s, has_fderiv_within_at f (f' x) (J k).Icc x := fun k x hx =>\n    (Hd x ⟨hJ_sub k hx.1, hx.2⟩).has_fderiv_within_at\n  have HiJ :\n    ∀ k,\n      integrable_on\n        (fun x =>\n          finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n            (f' x («expre » i) i))\n        (J k).Icc :=\n    fun k => Hi.mono_set (hJ_sub' k)\n  -- Apply the previous lemma to `J k`.\n  have HJ_eq := fun k =>\n    integral_divergence_of_has_fderiv_within_at_off_countable_aux₁ (J k) f f' s hs (HcJ k) (HdJ k) (HiJ k)\n  -- Note that the LHS of `HJ_eq k` tends to the LHS of the goal as `k → ∞`.\n  have hI_tendsto :\n    tendsto\n      (fun k =>\n        «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\" (J k).Icc\n          (finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n            (f' x («expre » i) i)))\n      at_top\n      ((nhds)\n        («expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\" I.Icc\n          (finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n            (f' x («expre » i) i)))) :=\n    by\n    simp only [integrable_on, ← measure.restrict_congr_set (box.Ioo_ae_eq_Icc _)] at Hi⊢\n    rw [← box.Union_Ioo_of_tendsto J.monotone hJl hJu] at Hi⊢\n    exact tendsto_set_integral_of_monotone (fun k => (J k).measurable_set_Ioo) (box.Ioo.comp J).monotone Hi\n  -- Thus it suffices to prove the same about the RHS.\n  refine' tendsto_nhds_unique_of_eventually_eq hI_tendsto _ (eventually_of_forall HJ_eq)\n  clear hI_tendsto\n  rw [tendsto_pi_nhds] at hJl hJu\n  /- We'll need to prove a similar statement about the integrals over the front sides and the\n    integrals over the back sides. In order to avoid repeating ourselves, we formulate a lemma. -/\n  suffices\n    ∀ (i : fin (n + 1)) (c : ℕ → exprℝ) (d),\n      (∀ k, c k ∈ Icc (I.lower i) (I.upper i)) →\n        tendsto c at_top ((nhds) d) →\n          tendsto\n            (fun k =>\n              «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n                ((J k).face i).Icc (f (i.insert_nth (c k) x) i))\n            at_top\n            (nhds <|\n              «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n                (I.face i).Icc (f (i.insert_nth d x) i))\n    by\n    rw [box.Icc_eq_pi] at hJ_sub'\n    refine' tendsto_finset_sum _ fun i hi => (this _ _ _ _ (hJu _)).sub (this _ _ _ _ (hJl _))\n    exacts[fun k => hJ_sub' k (J k).upper_mem_Icc _ trivial, fun k => hJ_sub' k (J k).lower_mem_Icc _ trivial]\n  intro i c d hc hcd\n  /- First we prove that the integrals of the restriction of `f` to `{x | x i = d}` over increasing\n    boxes `((J k).face i).Icc` tend to the desired limit. The proof mostly repeats the one above. -/\n  have hd : d ∈ Icc (I.lower i) (I.upper i) := is_closed_Icc.mem_of_tendsto hcd (eventually_of_forall hc)\n  have Hic : ∀ k, integrable_on (fun x => f (i.insert_nth (c k) x) i) (I.face i).Icc := fun k =>\n    (box.continuous_on_face_Icc ((continuous_apply i).comp_continuous_on Hc) (hc k)).integrable_on_Icc\n  have Hid : integrable_on (fun x => f (i.insert_nth d x) i) (I.face i).Icc :=\n    (box.continuous_on_face_Icc ((continuous_apply i).comp_continuous_on Hc) hd).integrable_on_Icc\n  have H :\n    tendsto\n      (fun k =>\n        «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n          ((J k).face i).Icc (f (i.insert_nth d x) i))\n      at_top\n      (nhds <|\n        «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n          (I.face i).Icc (f (i.insert_nth d x) i)) :=\n    by\n    have hIoo :\n      «expr⋃ , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr⋃ , »\"\n          ((J k).face i).Ioo =\n        (I.face i).Ioo :=\n      box.Union_Ioo_of_tendsto ((box.monotone_face i).comp J.monotone) (tendsto_pi_nhds.2 fun _ => hJl _)\n        (tendsto_pi_nhds.2 fun _ => hJu _)\n    simp only [integrable_on, ← measure.restrict_congr_set (box.Ioo_ae_eq_Icc _), ← hIoo] at Hid⊢\n    exact\n      tendsto_set_integral_of_monotone (fun k => ((J k).face i).measurable_set_Ioo)\n        (box.Ioo.monotone.comp ((box.monotone_face i).comp J.monotone)) Hid\n  /- Thus it suffices to show that the distance between the integrals of the restrictions of `f` to\n    `{x | x i = c k}` and `{x | x i = d}` over `((J k).face i).Icc` tends to zero as `k → ∞`. Choose\n    `ε > 0`. -/\n  refine' H.congr_dist (metric.nhds_basis_closed_ball.tendsto_right_iff.2 fun ε εpos => _)\n  have hvol_pos :\n    ∀ J : box (fin n),\n      0 <\n        finset.prod_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.prod_univ\"\n          (J.upper j - J.lower j) :=\n    fun J => prod_pos fun j hj => sub_pos.2 <| J.lower_lt_upper _\n  /- Choose `δ > 0` such that for any `x y ∈ I.Icc` at distance at most `δ`, the distance between\n    `f x` and `f y` is at most `ε / volume (I.face i).Icc`, then the distance between the integrals\n    is at most `(ε / volume (I.face i).Icc) * volume ((J k).face i).Icc ≤ ε`. -/\n  rcases metric.uniform_continuous_on_iff_le.1 (I.is_compact_Icc.uniform_continuous_on_of_continuous Hc)\n      (ε /\n        finset.prod_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.prod_univ\"\n          ((I.face i).upper j - (I.face i).lower j))\n      (div_pos εpos (hvol_pos (I.face i))) with\n    ⟨δ, δpos, hδ⟩\n  refine' (hcd.eventually (metric.ball_mem_nhds _ δpos)).mono fun k hk => _\n  have Hsub : ((J k).face i).Icc ⊆ (I.face i).Icc := box.le_iff_Icc.1 (box.face_mono (hJ_le _) i)\n  rw [mem_closed_ball_zero_iff, real.norm_eq_abs, abs_of_nonneg dist_nonneg, dist_eq_norm, ←\n    integral_sub (Hid.mono_set Hsub) ((Hic _).mono_set Hsub)]\n  calc\n    «expr‖ ‖»\n          («expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n            ((J k).face i).Icc (f (i.insert_nth d x) i - f (i.insert_nth (c k) x) i)) ≤\n        ε /\n            finset.prod_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.prod_univ\"\n              ((I.face i).upper j - (I.face i).lower j) *\n          (volume ((J k).face i).Icc).to_real :=\n      by\n      refine'\n        norm_set_integral_le_of_norm_le_const' (((J k).face i).measure_Icc_lt_top _) ((J k).face i).measurable_set_Icc\n          fun x hx => _\n      rw [← dist_eq_norm]\n      calc\n        dist (f (i.insert_nth d x) i) (f (i.insert_nth (c k) x) i) ≤\n            dist (f (i.insert_nth d x)) (f (i.insert_nth (c k) x)) :=\n          dist_le_pi_dist (f (i.insert_nth d x)) (f (i.insert_nth (c k) x)) i\n        _ ≤\n            ε /\n              finset.prod_univ\n                \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.prod_univ\"\n                ((I.face i).upper j - (I.face i).lower j) :=\n          hδ _ (I.maps_to_insert_nth_face_Icc hd <| Hsub hx) _ (I.maps_to_insert_nth_face_Icc (hc _) <| Hsub hx) _\n        \n      rw [fin.dist_insert_nth_insert_nth, dist_self, dist_comm]\n      exact max_le hk.le δpos.lt.le\n    _ ≤ ε :=\n      by\n      rw [box.Icc_def, real.volume_Icc_pi_to_real ((J k).face i).lower_le_upper, ← le_div_iff (hvol_pos _)]\n      refine' div_le_div_of_le_left εpos.le (hvol_pos _) (prod_le_prod (fun j hj => _) fun j hj => _)\n      exacts[sub_nonneg.2 (box.lower_le_upper _ _),\n        sub_le_sub ((hJ_sub' _ (J _).upper_mem_Icc).2 _) ((hJ_sub' _ (J _).lower_mem_Icc).1 _)]\n    \n#align\n  integral_divergence_of_has_fderiv_within_at_off_countable_aux₂ integral_divergence_of_has_fderiv_within_at_off_countable_aux₂\n\n",
 "integral_divergence_of_has_fderiv_within_at_off_countable_aux₁":
 "/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr⊥» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr⊥» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr⊥» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprEⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr →L[ ] » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprEⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expre » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expre » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/-\nCopyright (c) 2021 Yury Kudryashov. All rights reserved.\nReleased under Apache 2.0 license as described in the file LICENSE.\nAuthors: Yury Kudryashov\n-/\n/-- An auxiliary lemma for\n`measure_theory.integral_divergence_of_has_fderiv_within_at_off_countable`. This is exactly\n`box_integral.has_integral_GP_divergence_of_forall_has_deriv_within_at` reformulated for the\nBochner integral. -/\ntheorem integral_divergence_of_has_fderiv_within_at_off_countable_aux₁ (I : box (fin (n + 1)))\n    (f : «exprℝⁿ⁺¹» → «exprEⁿ⁺¹») (f' : «exprℝⁿ⁺¹» → «expr →L[ ] » («exprℝⁿ⁺¹») (exprℝ) («exprEⁿ⁺¹»))\n    (s : set («exprℝⁿ⁺¹»)) (hs : s.countable) (Hc : continuous_on f I.Icc)\n    (Hd : ∀ x ∈ I.Icc \\ s, has_fderiv_within_at f (f' x) I.Icc x)\n    (Hi :\n      integrable_on\n        (fun x =>\n          finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n            (f' x («expre » i) i))\n        I.Icc) :\n    «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\" I.Icc\n        (finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n          (f' x («expre » i) i)) =\n      finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n        («expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n            (I.face i).Icc (f (i.insert_nth (I.upper i) x) i) -\n          «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n            (I.face i).Icc (f (i.insert_nth (I.lower i) x) i)) :=\n  by\n  simp only [← set_integral_congr_set_ae (box.coe_ae_eq_Icc _)]\n  have A := (Hi.mono_set box.coe_subset_Icc).has_box_integral («expr⊥») rfl\n  have B :=\n    has_integral_GP_divergence_of_forall_has_deriv_within_at I f f' (s ∩ I.Icc) (hs.mono (inter_subset_left _ _))\n      (fun x hx => Hc _ hx.2) fun x hx => Hd _ ⟨hx.1, fun h => hx.2 ⟨h, hx.1⟩⟩\n  rw [continuous_on_pi] at Hc\n  refine' (A.unique B).trans (sum_congr rfl fun i hi => _)\n  refine' congr_arg₂ has_sub.sub _ _\n  · have := box.continuous_on_face_Icc (Hc i) (Set.right_mem_Icc.2 (I.lower_le_upper i))\n    have := (this.integrable_on_compact (box.is_compact_Icc _)).mono_set box.coe_subset_Icc\n    exact (this.has_box_integral («expr⊥») rfl).integral_eq\n    infer_instance\n  · have := box.continuous_on_face_Icc (Hc i) (Set.left_mem_Icc.2 (I.lower_le_upper i))\n    have := (this.integrable_on_compact (box.is_compact_Icc _)).mono_set box.coe_subset_Icc\n    exact (this.has_box_integral («expr⊥») rfl).integral_eq\n    infer_instance\n#align\n  integral_divergence_of_has_fderiv_within_at_off_countable_aux₁ integral_divergence_of_has_fderiv_within_at_off_countable_aux₁\n\n",
 "integral_divergence_of_has_fderiv_within_at_off_countable'":
 "/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr →L[ ] » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expre » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expre » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprface » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprfront_face » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprface » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprback_face » -/\n/-- **Divergence theorem** for a family of functions `f : fin (n + 1) → ℝⁿ⁺¹ → E`. See also\n`measure_theory.integral_divergence_of_has_fderiv_within_at_off_countable'` for a version formulated\nin terms of a vector-valued function `f : ℝⁿ⁺¹ → Eⁿ⁺¹`. -/\ntheorem integral_divergence_of_has_fderiv_within_at_off_countable' (hle : a ≤ b) (f : fin (n + 1) → «exprℝⁿ⁺¹» → E)\n    (f' : fin (n + 1) → «exprℝⁿ⁺¹» → «expr →L[ ] » («exprℝⁿ⁺¹») (exprℝ) E) (s : set («exprℝⁿ⁺¹»)) (hs : s.countable)\n    (Hc : ∀ i, continuous_on (f i) (Icc a b))\n    (Hd : ∀ x ∈ (pi Set.univ fun i => Ioo (a i) (b i)) \\ s, ∀ (i), has_fderiv_at (f i) (f' i x) x)\n    (Hi :\n      integrable_on\n        (fun x =>\n          finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n            (f' i x («expre » i)))\n        (Icc a b)) :\n    «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\" (Icc a b)\n        (finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n          (f' i x («expre » i))) =\n      finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n        («expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n            («exprface » i) (f i ((«exprfront_face » i) x)) -\n          «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n            («exprface » i) (f i ((«exprback_face » i) x))) :=\n  integral_divergence_of_has_fderiv_within_at_off_countable a b hle (fun x i => f i x)\n    (fun x => continuous_linear_map.pi fun i => f' i x) s hs (continuous_on_pi.2 Hc)\n    (fun x hx => has_fderiv_at_pi.2 (Hd x hx)) Hi\n#align\n  integral_divergence_of_has_fderiv_within_at_off_countable' integral_divergence_of_has_fderiv_within_at_off_countable'\n\n",
 "integral_divergence_of_has_fderiv_within_at_off_countable":
 "/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprEⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr →L[ ] » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprEⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprℝⁿ⁺¹» -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expre » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expre » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprface » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprfront_face » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprface » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«exprback_face » -/\n/-- **Divergence theorem** for Bochner integral. If `f : ℝⁿ⁺¹ → Eⁿ⁺¹` is continuous on a rectangular\nbox `[a, b] : set ℝⁿ⁺¹`, `a ≤ b`, is differentiable on its interior with derivative\n`f' : ℝⁿ⁺¹ → ℝⁿ⁺¹ →L[ℝ] Eⁿ⁺¹` and the divergence `λ x, ∑ i, f' x eᵢ i` is integrable on `[a, b]`,\nwhere `eᵢ = pi.single i 1` is the `i`-th basis vector, then its integral is equal to the sum of\nintegrals of `f` over the faces of `[a, b]`, taken with appropriat signs.\n\nMoreover, the same is true if the function is not differentiable at countably many\npoints of the interior of `[a, b]`.\n\nWe represent both faces `x i = a i` and `x i = b i` as the box\n`face i = [a ∘ fin.succ_above i, b ∘ fin.succ_above i]` in `ℝⁿ`, where\n`fin.succ_above : fin n ↪o fin (n + 1)` is the order embedding with range `{i}ᶜ`. The restrictions\nof `f : ℝⁿ⁺¹ → Eⁿ⁺¹` to these faces are given by `f ∘ back_face i` and `f ∘ front_face i`, where\n`back_face i = fin.insert_nth i (a i)` and `front_face i = fin.insert_nth i (b i)` are embeddings\n`ℝⁿ → ℝⁿ⁺¹` that take `y : ℝⁿ` and insert `a i` (resp., `b i`) as `i`-th coordinate. -/\ntheorem integral_divergence_of_has_fderiv_within_at_off_countable (hle : a ≤ b) (f : «exprℝⁿ⁺¹» → «exprEⁿ⁺¹»)\n    (f' : «exprℝⁿ⁺¹» → «expr →L[ ] » («exprℝⁿ⁺¹») (exprℝ) («exprEⁿ⁺¹»)) (s : set («exprℝⁿ⁺¹»)) (hs : s.countable)\n    (Hc : continuous_on f (Icc a b)) (Hd : ∀ x ∈ (Set.pi univ fun i => Ioo (a i) (b i)) \\ s, has_fderiv_at f (f' x) x)\n    (Hi :\n      integrable_on\n        (fun x =>\n          finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n            (f' x («expre » i) i))\n        (Icc a b)) :\n    «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\" (Icc a b)\n        (finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n          (f' x («expre » i) i)) =\n      finset.sum_univ \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `finset.sum_univ\"\n        («expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n            («exprface » i) (f ((«exprfront_face » i) x) i) -\n          «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n            («exprface » i) (f ((«exprback_face » i) x) i)) :=\n  by\n  rcases em (∃ i, a i = b i) with (⟨i, hi⟩ | hne)\n  · -- First we sort out the trivial case `∃ i, a i = b i`.\n    simp only [volume_pi, ← set_integral_congr_set_ae measure.univ_pi_Ioc_ae_eq_Icc]\n    have hi' : Ioc (a i) (b i) = ∅ := Ioc_eq_empty hi.not_lt\n    have : (pi Set.univ fun j => Ioc (a j) (b j)) = ∅ := univ_pi_eq_empty hi'\n    rw [this, integral_empty, sum_eq_zero]\n    rintro j -\n    rcases eq_or_ne i j with (rfl | hne)\n    · simp [hi]\n    · rcases Fin.exists_succAbove_eq hne with ⟨i, rfl⟩\n      have : (pi Set.univ fun k : fin n => Ioc (a <| j.succ_above k) (b <| j.succ_above k)) = ∅ := univ_pi_eq_empty hi'\n      rw [this, integral_empty, integral_empty, sub_self]\n  · -- In the non-trivial case `∀ i, a i < b i`, we apply a lemma we proved above.\n    have hlt : ∀ i, a i < b i := fun i => (hle i).lt_of_ne fun hi => hne ⟨i, hi⟩\n    convert integral_divergence_of_has_fderiv_within_at_off_countable_aux₂ ⟨a, b, hlt⟩ f f' s hs Hc Hd Hi\n#align\n  integral_divergence_of_has_fderiv_within_at_off_countable integral_divergence_of_has_fderiv_within_at_off_countable\n\n",
 "integral2_divergence_prod_of_has_fderiv_within_at_off_countable":
 "/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:177:8: unsupported: ambiguous notation -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `lower_set.prod -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr →L[ ] » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `exprℝ -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:177:8: unsupported: ambiguous notation -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `lower_set.prod -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `set.uIcc -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `set.uIcc -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:177:8: unsupported: ambiguous notation -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `lower_set.prod -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `set.uIcc -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `set.uIcc -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:177:8: unsupported: ambiguous notation -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `lower_set.prod -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:177:8: unsupported: ambiguous notation -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `lower_set.prod -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:177:8: unsupported: ambiguous notation -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `lower_set.prod -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `set.uIcc -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `set.uIcc -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:207:4: warning: unsupported notation `«expr∫ in .. , » -/\n/- ./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , » -/\n/-- **Divergence theorem** for functions on the plane. It is formulated in terms of two functions\n`f g : ℝ × ℝ → E` and iterated integral `∫ x in a₁..b₁, ∫ y in a₂..b₂, _`, where\n`a₁ a₂ b₁ b₂ : ℝ`. When thinking of `f` and `g` as the two coordinates of a single function\n`F : ℝ × ℝ → E × E` and when `E = ℝ`, this is the usual statement that the integral of the\ndivergence of `F` inside the rectangle with vertices `(aᵢ, bⱼ)`, `i, j =1,2`, equals the integral of\nthe normal derivative of `F` along the boundary.\n\nSee also `measure_theory.integral_divergence_prod_Icc_of_has_fderiv_within_at_off_countable_of_le`\nfor a version that uses an integral over `Icc a b`, where `a b : ℝ × ℝ`, `a ≤ b`. -/\ntheorem integral2_divergence_prod_of_has_fderiv_within_at_off_countable (f g : exprℝ × exprℝ → E)\n    (f' g' : exprℝ × exprℝ → «expr →L[ ] » (exprℝ × exprℝ) (exprℝ) E) (a₁ a₂ b₁ b₂ : exprℝ) (s : set (exprℝ × exprℝ))\n    (hs : s.countable) (Hcf : continuous_on f (lower_set.prod (set.uIcc a₁ b₁) (set.uIcc a₂ b₂)))\n    (Hcg : continuous_on g (lower_set.prod (set.uIcc a₁ b₁) (set.uIcc a₂ b₂)))\n    (Hdf :\n      ∀ x ∈ lower_set.prod (Ioo (min a₁ b₁) (max a₁ b₁)) (Ioo (min a₂ b₂) (max a₂ b₂)) \\ s, has_fderiv_at f (f' x) x)\n    (Hdg :\n      ∀ x ∈ lower_set.prod (Ioo (min a₁ b₁) (max a₁ b₁)) (Ioo (min a₂ b₂) (max a₂ b₂)) \\ s, has_fderiv_at g (g' x) x)\n    (Hi : integrable_on (fun x => f' x (1, 0) + g' x (0, 1)) (lower_set.prod (set.uIcc a₁ b₁) (set.uIcc a₂ b₂))) :\n    «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\" a₁ b₁\n        («expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\" a₂\n          b₂ (f' (x, y) (1, 0) + g' (x, y) (0, 1))) =\n      «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\" a₁ b₁\n              (g (x, b₂)) -\n            «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\"\n              a₁ b₁ (g (x, a₂)) +\n          «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\" a₂\n            b₂ (f (b₁, y)) -\n        «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\" a₂\n          b₂ (f (a₁, y)) :=\n  by\n  wlog (discharger := tactic.skip) h₁ : a₁ ≤ b₁ := le_total a₁ b₁ using a₁ b₁, b₁ a₁\n  wlog (discharger := tactic.skip) h₂ : a₂ ≤ b₂ := le_total a₂ b₂ using a₂ b₂, b₂ a₂\n  · simp only [uIcc_of_le h₁, uIcc_of_le h₂, min_eq_left, max_eq_right, h₁, h₂] at Hcf Hcg Hdf Hdg Hi\n    calc\n      «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\" a₁ b₁\n            («expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\"\n              a₂ b₂ (f' (x, y) (1, 0) + g' (x, y) (0, 1))) =\n          «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n            (Icc a₁ b₁)\n            («expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n              (Icc a₂ b₂) (f' (x, y) (1, 0) + g' (x, y) (0, 1))) :=\n        by simp only [interval_integral.integral_of_le, h₁, h₂, set_integral_congr_set_ae Ioc_ae_eq_Icc]\n      _ =\n          «expr∫ in , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in , »\"\n            (lower_set.prod (Icc a₁ b₁) (Icc a₂ b₂)) (f' x (1, 0) + g' x (0, 1)) :=\n        (set_integral_prod _ Hi).symm\n      _ =\n          «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\" a₁\n                  b₁ (g (x, b₂)) -\n                «expr∫ in .. , »\n                  \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\" a₁ b₁\n                  (g (x, a₂)) +\n              «expr∫ in .. , »\n                \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\" a₂ b₂\n                (f (b₁, y)) -\n            «expr∫ in .. , » \"./././Mathport/Syntax/Translate/Expr.lean:210:13: unsupported notation `«expr∫ in .. , »\"\n              a₂ b₂ (f (a₁, y)) :=\n        by\n        rw [Icc_prod_Icc] at *\n        apply\n            integral_divergence_prod_Icc_of_has_fderiv_within_at_off_countable_of_le f g f' g' (a₁, a₂) (b₁, b₂)\n              ⟨h₁, h₂⟩ s <;>\n          assumption\n      \n  · rw [uIcc_comm b₂ a₂, min_comm b₂ a₂, max_comm b₂ a₂] at this\n    intro Hcf Hcg Hdf Hdg Hi\n    simp only [interval_integral.integral_symm b₂ a₂, interval_integral.integral_neg]\n    refine' (congr_arg has_neg.neg (this Hcf Hcg Hdf Hdg Hi)).trans _\n    abel\n  · rw [uIcc_comm b₁ a₁, min_comm b₁ a₁, max_comm b₁ a₁] at this\n    intro Hcf Hcg Hdf Hdg Hi\n    simp only [interval_integral.integral_symm b₁ a₁]\n    refine' (congr_arg has_neg.neg (this Hcf Hcg Hdf Hdg Hi)).trans _\n    abel\n#align\n  integral2_divergence_prod_of_has_fderiv_within_at_off_countable integral2_divergence_prod_of_has_fderiv_within_at_off_countable\n\n"}